"use strict";(self["webpackChunkwhite_space_hotel"]=self["webpackChunkwhite_space_hotel"]||[]).push([[473],{9473:function(e,o,t){t.r(o),t.d(o,{default:function(){return Be}});var n=t(6252),a=t(3577);const i=e=>((0,n.dD)("data-v-36d81afa"),e=e(),(0,n.Cn)(),e),l={class:"roomDetail"},r=i((()=>(0,n._)("h1",{class:"logo"},"White Space Hotel",-1))),s={key:0,class:"photo"},c={key:0,class:"photo__dots"},d=["onClick","onKeyup"],u={key:1,class:"photo__secondary-block"},_={key:1,class:"detail"},m={class:"room"},p={class:"room-info"},h={class:"room-info__title"},g={class:"room-info__list"},v={class:"room-info__desc"},f={class:"room-price"},k=i((()=>(0,n._)("li",null,"平日(一~四)",-1))),y=i((()=>(0,n._)("li",null,"假日(五~日)",-1))),w={class:"room-time"},b=i((()=>(0,n._)("p",null,"Check In",-1))),D=i((()=>(0,n._)("p",null,"Check Out",-1))),x={class:"room-amenities"},C={class:"reservation"},I={class:"reservation__date-picker"};function S(e,o,t,i,S,P){const $=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)($,{to:"/"},{default:(0,n.w5)((()=>[r])),_:1}),i.room.imageUrl?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",{class:"photo__img photo__primary",style:(0,a.j5)({"background-image":`url(${i.primaryPhoto})`}),onClick:o[0]||(o[0]=e=>i.showLightbox(!0,0)),onKeyup:o[1]||(o[1]=e=>i.showLightbox(!0,0))},null,36),i.dots.display?((0,n.wg)(),(0,n.iD)("ul",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.room.imageUrl,((e,o)=>((0,n.wg)(),(0,n.iD)("li",{key:`img${o}`,class:(0,a.C_)({"photo__dots--selected":e===i.dots.nowUrl}),onClick:t=>i.changeImage(e,o),onKeyup:t=>i.changeImage(e,o)},null,42,d)))),128))])):((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",{class:"photo__img photo__secondary",style:(0,a.j5)({"background-image":`url(${i.room.imageUrl[1]})`}),onClick:o[2]||(o[2]=e=>i.showLightbox(!0,1)),onKeyup:o[3]||(o[3]=e=>i.showLightbox(!0,1))},null,36),(0,n._)("div",{class:"photo__img photo__secondary",style:(0,a.j5)({"background-image":`url(${i.room.imageUrl[2]})`}),onClick:o[4]||(o[4]=e=>i.showLightbox(!0,2)),onKeyup:o[5]||(o[5]=e=>i.showLightbox(!0,2))},null,36)]))])):(0,n.kq)("",!0),i.room.name?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",m,[(0,n._)("div",p,[(0,n._)("div",h,(0,a.zw)(i.room.name),1),(0,n._)("ul",g,[(0,n._)("li",null,"房客人數限制： "+(0,a.zw)(i.room.descriptionShort.GuestMin)+"~"+(0,a.zw)(i.room.descriptionShort.GuestMax)+" 人",1),(0,n._)("li",null,"床型："+(0,a.zw)(i.bedType),1),(0,n._)("li",null,"衛浴數量： "+(0,a.zw)(i.room.descriptionShort["Private-Bath"])+" 間",1),(0,n._)("li",null,"房間大小： "+(0,a.zw)(i.room.descriptionShort.Footage)+" 平方公尺",1)]),(0,n._)("div",v,(0,a.zw)(i.room.description),1)]),(0,n._)("ul",f,[(0,n._)("li",null,"NT."+(0,a.zw)(i.room.normalDayPrice),1),k,(0,n._)("li",null,"NT."+(0,a.zw)(i.room.holidayPrice),1),y]),(0,n._)("div",w,[(0,n._)("div",null,[b,(0,n._)("p",null,(0,a.zw)(i.room.checkInAndOut.checkInEarly)+" - "+(0,a.zw)(i.room.checkInAndOut.checkInLate),1)]),(0,n._)("div",null,[D,(0,n._)("p",null,(0,a.zw)(i.room.checkInAndOut.checkOut),1)])]),(0,n._)("ul",x,[(0,n._)("li",{class:(0,a.C_)(["wifi",{"not-provide":!i.room.amenities["Wi-Fi"]}])},"Wi-Fi",2),(0,n._)("li",{class:(0,a.C_)(["television",{"not-provide":!i.room.amenities.Television}])},"電視",2),(0,n._)("li",{class:(0,a.C_)(["view",{"not-provide":!i.room.amenities["Great-View"]}])},"漂亮的視野",2),(0,n._)("li",{class:(0,a.C_)(["breakfast",{"not-provide":!i.room.amenities.Breakfast}])},"早餐",2),(0,n._)("li",{class:(0,a.C_)(["airConditioner",{"not-provide":!i.room.amenities["Air-Conditioner"]}])},"空調",2),(0,n._)("li",{class:(0,a.C_)(["smoke",{"not-provide":!i.room.amenities["Smoke-Free"]}])},"禁止吸煙",2),(0,n._)("li",{class:(0,a.C_)(["bar",{"not-provide":!i.room.amenities["Mini-Bar"]}])},"Mini Bar",2),(0,n._)("li",{class:(0,a.C_)(["refrigerator",{"not-provide":!i.room.amenities.Refrigerator}])},"冰箱",2),(0,n._)("li",{class:(0,a.C_)(["child",{"not-provide":!i.room.amenities["Child-Friendly"]}])},"適合兒童",2),(0,n._)("li",{class:(0,a.C_)(["roomService",{"not-provide":!i.room.amenities["Room-Service"]}])},"Room Service",2),(0,n._)("li",{class:(0,a.C_)(["sofa",{"not-provide":!i.room.amenities.Sofa}])},"沙發",2),(0,n._)("li",{class:(0,a.C_)(["dog",{"not-provide":!i.room.amenities["Pet-Friendly"]}])},"寵物攜帶",2)])]),(0,n._)("div",C,[(0,n._)("div",I,[(0,n.Wm)(i["DatePicker"],{ref:"refDatePicker","mark-dates":i.bookedDates,onGetSelectedDate:i.getSelectedDate},null,8,["mark-dates"])]),(0,n._)("div",{class:"reservation__buttons"},[(0,n._)("button",{class:"reservation__check",onClick:i.checkSelectedDate},"預約時段"),(0,n._)("button",{class:"reservation__delete",onClick:i.fetchCancelAllReservations},"取消所有預約")])])])):(0,n.kq)("",!0),(0,n.Wm)(i["LightboxItem"],{info:i.lightboxInfo,onClose:o[6]||(o[6]=e=>i.showLightbox(!1))},null,8,["info"]),(0,n.Wm)(i["BookingItem"],{info:i.bookingInfo,onClose:o[7]||(o[7]=e=>i.showBooking(!1)),onReservationRoom:i.fetchReserveRoom},null,8,["info"]),(0,n.Wm)(i["LoadingItem"],{display:i.loadingDisplay},null,8,["display"])])}t(7658);var P=t(2262),$=t(7877),j=t(5188);const q={id:"datepicker__block"},z=(0,n._)("div",{id:"datepicker"},null,-1),R=(0,n._)("p",{class:"datepicker__desc"},[(0,n._)("span",null," "),(0,n.Uk)("代表已被預訂，請選擇別的日期")],-1),B=[z,R];function L(e,o,t,a,i,l){return(0,n.wg)(),(0,n.iD)("div",q,B)}var U={__name:"DatePicker",props:{markDates:{type:Object,default:()=>({})}},emits:["get-selected-date"],setup(e,{expose:o,emit:t}){const n=e,{markDates:a}=(0,P.BK)(n),{laydate:i}=window,l=(0,P.iH)(""),r=(0,P.iH)(""),s=(0,P.iH)("");function c(){const e=(new Date).setDate((new Date).getDate()+1),o=new Date(e).toISOString().substring(0,10);return o}function d(){const e=(new Date).setDate((new Date).getDate()+90),o=new Date(e).toISOString().substring(0,10);return o}function u(e,o){const t=document.querySelector("#datepicker .laydate-set-ym");t.children[0].textContent=`${e} / `,t.children[1].textContent=o}function _(e){u(e.year,e.month)}function m(){document.querySelectorAll(".laydate-prev-m").forEach((e=>{e.addEventListener("click",(()=>{const e=document.querySelector("#datepicker .laydate-set-ym").children,o=e[0].textContent.substring(0,4),t=e[1].textContent.substring(0,e[1].textContent.length-1);u(o,t)}))})),document.querySelectorAll(".laydate-next-m").forEach((e=>{e.addEventListener("click",(()=>{const e=document.querySelector("#datepicker .laydate-set-ym").children,o=e[0].textContent.substring(0,4),t=e[1].textContent.substring(0,e[1].textContent.length-1);u(o,t)}))}))}function p(e){const o=e.getFullYear(),t=e.getMonth()+1>9?e.getMonth()+1:`0${e.getMonth()+1}`,n=e.getDate()>9?e.getDate():`0${e.getDate()}`;return`${o}-${t}-${n}`}function h(e,o){const t=new Date(e).getTime(),n=new Date(o).getTime(),a=864e5;let i=0,l=0,r=new Set;for(let s=t;s<=n;s+=a){const e=new Date(s);r.add(p(e)),0===e.getDay()||6===e.getDay()?l+=1:i+=1}return r=Array.from(r),{weekday:i,holiday:l,dates:r}}function g(){const e=document.querySelectorAll(".reservation__date-picker td");e.forEach((e=>{e.addEventListener("click",(()=>{s.value=e.getAttribute("lay-ymd")}))}))}function v(){l.value||(l.value=s.value),r.value||(r.value=s.value),s.value!==l.value&&s.value!==r.value&&(l.value=s.value,r.value=s.value);const e=h(l.value,r.value);t("get-selected-date",e)}function f(){document.querySelector("#datepicker").remove();const e=document.createElement("div");e.id="datepicker",document.querySelector("#datepicker__block").prepend(e),i.render({elem:"#datepicker",isInitValue:!1,min:c(),max:d(),showBottom:!1,theme:"datepicker-default",mark:a.value,range:!0,position:"static",ready(){u((new Date).getFullYear(),(new Date).getMonth()+1),m(),g()},change(e,o,t){_(o),l.value=`${o.year}-${o.month}-${o.date}`,r.value=`${t.year}-${t.month}-${t.date}`}})}o({getSelectedDate:v,initDatePicker:f});const k={props:n,markDates:a,emits:t,laydate:i,laydateStart:l,laydateEnd:r,nowSelected:s,minDate:c,maxDate:d,changeTitle:u,changeDate:_,changeMonth:m,formatDate:p,computerDays:h,tdClick:g,getSelectedDate:v,initDatePicker:f,ref:P.iH,toRefs:P.BK};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},M=t(3744);const K=(0,M.Z)(U,[["render",L]]);var O=K,A=t(9963);const H={class:"lightbox"},E={class:"lightbox__photo"},F={class:"photo__display"},T=["src","alt"],W={class:"photo__desc"},Z={class:"photo__desc-name"},Y={class:"photo__desc-qty"},G=["onClick"];function N(e,o,t,i,l,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["semi-transparent",{hide:!i.info.display}])},[(0,n._)("div",H,[(0,n._)("div",{class:(0,a.C_)(["lightbox__arrow-left",{"lightbox__arrow--disabled":0===i.nowIndex}]),onClick:o[0]||(o[0]=(0,A.iM)((e=>i.changePhoto(i.nowIndex-1)),["stop"])),onKeyup:o[1]||(o[1]=e=>i.changePhoto(i.nowIndex-1))},"⟨",34),(0,n._)("div",E,[(0,n._)("div",F,[(0,n._)("img",{src:i.info.photo[i.nowIndex],alt:`${i.info.name} Photo`},null,8,T)]),(0,n._)("div",W,[(0,n._)("div",Z,(0,a.zw)(i.info.name),1),(0,n._)("div",Y,(0,a.zw)(i.nowIndex+1)+"/"+(0,a.zw)(i.info.photo.length),1)]),(0,n._)("div",{class:"photo__close",onClick:(0,A.iM)(i.close,["self"]),onKeyup:i.close},"×",40,G)]),(0,n._)("div",{class:(0,a.C_)(["lightbox__arrow-right",{"lightbox__arrow--disabled":i.nowIndex===i.info.photo.length-1}]),onClick:o[2]||(o[2]=(0,A.iM)((e=>i.changePhoto(i.nowIndex+1)),["stop"])),onKeyup:o[3]||(o[3]=e=>i.changePhoto(i.nowIndex+1))},"⟩",34)])],2)}var V={__name:"LightboxItem",props:{info:{type:Object,default:()=>({})}},emits:["close"],setup(e,{expose:o,emit:t}){o();const a=e,{info:i}=(0,P.BK)(a),l=(0,P.iH)(0);function r(){t("close")}function s(e){e>-1&&e<i.value.photo.length&&(l.value=e)}(0,n.YP)((()=>i.value.photoIndex),(e=>{l.value=e})),(0,n.bv)((()=>{l.value=i.value.photoIndex}));const c={props:a,info:i,emits:t,nowIndex:l,close:r,changePhoto:s,onMounted:n.bv,ref:P.iH,toRefs:P.BK,watch:n.YP};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};const Q=(0,M.Z)(V,[["render",N],["__scopeId","data-v-5c5477b2"]]);var J=Q;const X=e=>((0,n.dD)("data-v-d71f594a"),e=e(),(0,n.Cn)(),e),ee={class:"booking"},oe=X((()=>(0,n._)("div",{class:"booking__title"},"預約時段",-1))),te={class:"booking-form"},ne={class:"booking-form__row"},ae=X((()=>(0,n._)("label",{for:"booking-name"},"姓名",-1))),ie={class:"booking-form__row"},le=X((()=>(0,n._)("label",{for:"booking-phone"},"電話",-1))),re={class:"booking-form__row"},se=X((()=>(0,n._)("label",{for:"booking-date"},"預約起迄",-1))),ce={class:"booking-form__period"},de=["value"],ue=X((()=>(0,n._)("span",null,"~",-1))),_e=["value"],me={class:"booking-form__nights"},pe={class:"booking-form__row"},he=X((()=>(0,n._)("span",null,"平日時段",-1))),ge={class:"booking-form__row"},ve=X((()=>(0,n._)("span",null,"假日時段",-1))),fe={class:"booking-form__price"},ke={class:"booking-form__buttons"},ye=["disabled","onClick"];function we(e,o,t,i,l,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["semi-transparent",{hide:!i.info.display}])},[(0,n._)("div",ee,[oe,(0,n._)("form",te,[(0,n._)("div",ne,[ae,(0,n.wy)((0,n._)("input",{id:"booking-name","onUpdate:modelValue":o[0]||(o[0]=e=>i.name=e),type:"text",required:""},null,512),[[A.nr,i.name]]),(0,n._)("p",null,(0,a.zw)(i.errorMsg.name),1)]),(0,n._)("div",ie,[le,(0,n.wy)((0,n._)("input",{id:"booking-phone","onUpdate:modelValue":o[1]||(o[1]=e=>i.phone=e),type:"phone",required:""},null,512),[[A.nr,i.phone]]),(0,n._)("p",null,(0,a.zw)(i.errorMsg.phone),1)]),(0,n._)("div",re,[se,(0,n._)("div",ce,[(0,n._)("input",{id:"booking-date",disabled:"",value:i.formatDate(i.info.startDate)},null,8,de),ue,(0,n._)("input",{disabled:"",value:i.formatDate(i.info.endDate)},null,8,_e)])]),(0,n._)("div",me,[(0,n._)("div",pe,[he,(0,n._)("span",null,(0,a.zw)(i.info.weekday)+"夜",1)]),(0,n._)("div",ge,[ve,(0,n._)("span",null,(0,a.zw)(i.info.holiday)+"夜",1)])]),(0,n._)("div",fe,"=    NT."+(0,a.zw)(i.totalPrice),1),(0,n._)("div",ke,[(0,n._)("input",{type:"button",value:"取消",onClick:i.close}),(0,n._)("input",{type:"submit",value:"確定預約",disabled:!i.checkUserInfo(),onClick:(0,A.iM)(i.reservation,["prevent"])},null,8,ye)])])])],2)}var be={__name:"BookingItem",props:{info:{type:Object,default:()=>({})}},emits:["close","reservation-room"],setup(e,{expose:o,emit:t}){o();const a=e,{info:i}=(0,P.BK)(a),l=(0,P.iH)(""),r=(0,P.iH)(""),s=(0,P.qj)({name:"",phone:""}),c=(0,n.Fl)((()=>{const e=i.value.weekday*i.value.weekdayPrice,o=i.value.holiday*i.value.holidayPrice;return e+o}));function d(e){return e?e.replace(/-0?/g,"/"):""}function u(){if(!l.value)return s.name="請輸入中文或英文姓名",!1;const e=/^[\u4e00-\u9fa5a-zA-Z]+$/g,o=l.value.match(e)||[];return o.length>0?(s.name="",!0):(s.name="請輸入中文或英文姓名",!1)}function _(){if(!r.value)return s.phone="請輸入手機或市話",!1;if(r.value.length>10)return s.phone="輸入字數過多",!1;const e=/(\d{2,3}-?|\(\d{2,3}\))\d{3,4}-?\d{4}|09\d{2}(\d{6}|-\d{3}-?\d{3})/g,o=r.value.match(e)||[];return o.length>0?(s.phone="",!0):(s.phone="手機或市話格式錯誤",!1)}function m(){const e=u(),o=_();return e&&o}function p(){m()&&t("reservation-room",{name:l.value,tel:r.value})}function h(){t("close")}(0,n.bv)((()=>{m()}));const g={props:a,info:i,emits:t,name:l,phone:r,errorMsg:s,totalPrice:c,formatDate:d,checkUserName:u,checkUserPhone:_,checkUserInfo:m,reservation:p,close:h,computed:n.Fl,onMounted:n.bv,reactive:P.qj,ref:P.iH,toRefs:P.BK};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}};const De=(0,M.Z)(be,[["render",we],["__scopeId","data-v-d71f594a"]]);var xe=De;const Ce=e=>((0,n.dD)("data-v-7ae58578"),e=e(),(0,n.Cn)(),e),Ie=Ce((()=>(0,n._)("ul",{class:"circle"},[(0,n._)("li"),(0,n._)("li"),(0,n._)("li"),(0,n._)("li"),(0,n._)("li")],-1))),Se=[Ie];function Pe(e,o,t,i,l,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["semi-transparent",{hide:!i.display}])},Se,2)}var $e={__name:"LoadingItem",props:{display:{type:Boolean,default:!1}},setup(e,{expose:o}){o();const t=e,{display:n}=(0,P.BK)(t),a={props:t,display:n,toRefs:P.BK};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};const je=(0,M.Z)($e,[["render",Pe],["__scopeId","data-v-7ae58578"]]);var qe=je,ze={__name:"RoomDetail",setup(e,{expose:o}){o();const t=(0,n.f3)("modal"),a=(0,P.iH)(null),i=(0,P.iH)(""),l=(0,P.qj)({});let r=(0,P.qj)([]),s=(0,P.qj)({});const c=(0,P.qj)([]),d=(0,P.qj)({name:"",photo:[],photoIndex:0,display:!1}),u=(0,P.qj)({display:!1,weekday:0,holiday:0,weekdayPrice:0,holidayPrice:0,startDate:"",endDate:""}),_=(0,P.iH)(!1),m=(0,P.qj)({display:!1,nowUrl:"",nowIndex:0}),p=(0,n.Fl)((()=>m.display?(m.nowUrl||([m.nowUrl]=l.imageUrl),m.nowUrl):l.imageUrl[0])),h=(0,n.Fl)((()=>{const e=l.descriptionShort.Bed||[];let o="1 張";switch(e.length>1&&(o=`${e.length} 張`),e[0]){case"Single":return`${o}單人床`;case"Small Double":return`${o}小型雙人床`;case"Double":return`${o}雙人床`;case"Queen":return`${o}加大雙人床`;default:return`${o}床`}}));function g(e){_.value=e}function v(e){u.display=e}function f(){(0,$.g$)(i.value).then((async e=>{if(g(!1),e.data.success){Object.assign(l,e.data.room[0]),r=e.data.booking,s={};const o=(new Date).toISOString().substring(0,10).replaceAll("-","");r.forEach((e=>{e.date.replaceAll("-","")>=o&&(s[e.date]="")}))}await(0,n.Y3)(),a.value.initDatePicker()})).catch((e=>{t.openError(e.response?.data?.message)}))}function k({weekday:e,holiday:o,dates:t}){u.weekday=e,u.holiday=o,u.weekdayPrice=l.normalDayPrice,u.holidayPrice=l.holidayPrice,[u.startDate]=t,u.endDate=t[t.length-1],c.push(...t)}async function y(){await a.value.getSelectedDate(),c.length>0?v(!0):t.open({title:"提示訊息",msg:"請選擇預約起迄日期",btnText:"關閉"})}function w({name:e,tel:o}){v(!1),g(!0),(0,$.P2)(i.value,{name:e,tel:o,date:c}).then((e=>{e.data.success&&(f(),t.open({title:"預約成功",msg:"",btnText:"回頁面"}))})).catch((e=>{f(),t.openError(e.response?.data?.message)}))}function b(){(0,$.aC)().finally((()=>f()))}function D(e,o=0){d.name=l.name,d.photo=l.imageUrl,m.display?d.photoIndex=m.nowIndex:d.photoIndex=o,d.display=e}function x(){window.innerWidth<=768?m.display=!0:m.display=!1,(0,j.Z)(window,"resize",(()=>{window.innerWidth<=768?m.display=!0:m.display=!1}))}function C(e,o){m.display&&(m.nowUrl=e,m.nowIndex=o)}x(),(0,n.bv)((()=>{g(!0),i.value=sessionStorage.getItem("roomId"),f()}));const I={modal:t,refDatePicker:a,roomId:i,room:l,get bookedInfo(){return r},set bookedInfo(e){r=e},get bookedDates(){return s},set bookedDates(e){s=e},totalDates:c,lightboxInfo:d,bookingInfo:u,loadingDisplay:_,dots:m,primaryPhoto:p,bedType:h,showLoading:g,showBooking:v,fetchRoomDetail:f,getSelectedDate:k,checkSelectedDate:y,fetchReserveRoom:w,fetchCancelAllReservations:b,showLightbox:D,layoutWidth:x,changeImage:C,computed:n.Fl,inject:n.f3,nextTick:n.Y3,onMounted:n.bv,reactive:P.qj,ref:P.iH,get apiGetRoomDetail(){return $.g$},get apiPostReserveRoom(){return $.P2},get apiDeleteAllReservations(){return $.aC},get useEventListener(){return j.Z},DatePicker:O,LightboxItem:J,BookingItem:xe,LoadingItem:qe};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}};const Re=(0,M.Z)(ze,[["render",S],["__scopeId","data-v-36d81afa"]]);var Be=Re}}]);
//# sourceMappingURL=473.55e47803.js.map